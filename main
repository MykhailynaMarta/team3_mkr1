import tkinter as tk
from tkinter import filedialog, messagebox

def filter_file_by_keyword():
    # Відкриваємо вікно вибору файлу
    file_path = filedialog.askopenfilename(filetypes=[("Text files", "*.txt")])
    if not file_path:
        messagebox.showwarning("Помилка", "Файл не вибрано.")
        return
    
    # Запитуємо ключове слово
    keyword = keyword_entry.get().strip()
    if not keyword:
        messagebox.showwarning("Помилка", "Введіть ключове слово.")
        return
    
    # Читаємо файл і фільтруємо рядки
    with open(file_path, "r", encoding="utf-8") as file:
        lines = file.readlines()
    
    filtered_lines = [line for line in lines if keyword in line]
    
    if not filtered_lines:
        messagebox.showinfo("Результат", "Жоден рядок не містить вказаного ключового слова.")
        return
    
    # Вибір місця збереження
    save_path = filedialog.asksaveasfilename(defaultextension=".txt", filetypes=[("Text files", "*.txt")])
    if not save_path:
        messagebox.showwarning("Помилка", "Не обрано місце для збереження.")
        return
    
    # Записуємо результат у новий файл
    with open(save_path, "w", encoding="utf-8") as output_file:
        output_file.writelines(filtered_lines)
    
    messagebox.showinfo("Готово", f"Фільтрований вміст збережено у '{save_path}'.")

# Створення графічного інтерфейсу
root = tk.Tk()
root.title("Фільтрація TXT файлу")
root.geometry("400x200")

tk.Label(root, text="Введіть ключове слово:").pack(pady=5)
keyword_entry = tk.Entry(root, width=40)
keyword_entry.pack(pady=5)

tk.Button(root, text="Вибрати файл та фільтрувати", command=filter_file_by_keyword).pack(pady=10)

root.mainloop()
